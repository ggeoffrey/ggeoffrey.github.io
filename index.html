<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="ressources/css/style.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div id="container">
			<canvas id="target">
				Your browser do not support the &lt;canvas&gt; element. You should update it :)
			</canvas>
			<div id="tooltip"></div>
		</div>



		<script src="ressources/libs/three.js"></script>
		<script src="ressources/libs/OrbitControls.js"></script>
		<script src="ressources/libs/d3-3d.js"></script>
		<script src="ressources/libs/stats.min.js"></script>

		<script src="ressources/libs/gravity.js"></script>

		<script>

			var graph_instance;

			graph_instance = (function(){

				var target_canvas, tooltip, graph, graph_instance;

				target_canvas = document.getElementById('target');
				tooltip = document.getElementById('tooltip');

				graph = {
					"nodes" : [{name: "foo", group: 1},{name: "bar", group: 2}],
					"links" : [{source : 0, target: 1}]
				};

				graph_instance = gravity.graph.create({
					"canvas" : target_canvas,
					"worker-path" : "ressources/libs/gravity-worker.js",
					"stats" : true,
					"webgl" : {
						"antialias" : true,
						"background" : false,
						"lights" : true,
						"shadows" : true
					},
					"force": {

					}
				});



				// once initialised, add content
				graph_instance.on("ready", function(){
					graph_instance.nodes(graph.nodes);
					graph_instance.links(graph.links)
					graph_instance.updateForce();
				});

				// mouse over a node
				graph_instance.on("node-over", function(node, event){

					tooltip.innerText = node.name;

					target_canvas.style.cursor = "pointer";
					tooltip.style.top = event.clientY + "px";
					tooltip.style.left = event.clientX + "px";
					tooltip.style.display = "block";
				});


				// mouse leave a node
				graph_instance.on("node-blur", function(){
					target_canvas.style.cursor = "inherit";
					tooltip.style.display = "none";
				});


				graph_instance.on("node-select", function(node, event){

				});


				// Add stats
				if(graph_instance.stats.domElement){
					var stats = graph_instance.stats.domElement;
					stats.style.left = "auto";
					stats.style.top = "auto";
					stats.style.right = "0px";
					stats.style.bottom = "0px";
					target_canvas.parentElement.appendChild(stats);
				}


				return graph_instance;
			})();


		</script>
	</body>
</html>
